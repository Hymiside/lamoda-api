# Тестовое задание Lamoda tech
## Описание
В данном решении реализованы все методы, указанные в задании. Также дополнительно реализована логика работы с множеством складов. Идея такова, товар бронируется на ближайшем складе от места заказа. Рассчеты расстояний реализованы на уровне запросов в БД, с помощью PostGIS. Все товары, что необоходимо было зарезервировать, могут быть зарезервированы на разных складах, под единым айди резервации.

API и Postgres поднимаются в отдельных docker контейнерах. После того, как запустится БД, накатываются миграции.
На все вопросы по решению я с радостью отвечу в [телеграм](https://t.me/hymiside).

## Инструкция по разворачиванию
1. Склонируйте репозиторий
```bash
git clone https://github.com/Hymiside/lamoda-api.git
```
2. Выполните команду сброки (если необходимо, используйте `sudo`)
```
docker compose build
```
3. Выполните команду запуска
```
docker compose up
```

## Методы и ответы API
### GET | Products
Возвращает все продукты, что есть в БД
```
GET: /products
```

### GET | Avilability product
Возвращает наличие продуктов на складе, по идентификатору склада
```
GET: /products/availability?warehouse_id={integer}
```


### POST | Reservation products
Резервирует продукты на складе и возвращает айди резервации
```
POST: /reservation-products
```
Пример тестового запроса
```json
{
  "part_numbers": ["P13579", "P97431", "P13279"], // required
	"latitude": 21.213, // required
  "longitude": 32.23 // required
}
```

### DELETE | Reservation products
Отменяет резервацию продукта или продуктов на складе. Резервацию можно отменить полностью по идентификатору резервации, либо частично по массиву идентификаторов продуктов.
```
DELETE: /reservation-products
```
Пример тестового запроса
```json
{
	"reservation_id": "00000000-0000-0000-0000-000000000000", // required
	"part_numbers": ["P13579"]
}
```

### POST | Confirm reservation
Подтверждает резервацию продукта или продуктов на складе. Резервацию можно подтвердить полностью по идентификатору резервации, либо частично по массиву идентификаторов продуктов.
```
POST: /confirm-reservation
```
Пример тестового запроса
```json
{
	"reservation_id": "00000000-0000-0000-0000-000000000000", // required
	"part_numbers": ["P13579"]
}
```